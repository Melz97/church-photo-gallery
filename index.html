<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Throne of the Risen Christ International Ministry</title>
  <script type="module" src="https://unpkg.com/@material/web/all.js?module"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Material+Icons" />
  <style>
    body {
      margin: 0;
      font-family: Roboto, sans-serif;
      background: linear-gradient(135deg, #5b36f2, #9c27b0);
      background-attachment: fixed;
      background-repeat: no-repeat;
      color: #ffffff;
    }

    header {
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2);
      background-color: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(8px);
      border-radius: 1rem;
      margin: 1rem;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 10;
      color: #1c1b1f;
      transition: transform 0.3s ease-in-out;
    }

    nav a {
      margin-left: 1rem;
      color: #5b36f2;
      text-decoration: none;
      font-weight: 500;
    }

    nav a:hover {
      text-decoration: underline;
    }

    .hero {
      background: url('church-bg.jpg') center/cover no-repeat;
      height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .hero-overlay {
      background: rgba(255, 255, 255, 0.15);
      color: #ffffff;
      backdrop-filter: blur(4px);
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 0 24px rgba(0, 0, 0, 0.2);
    }

    main {
      max-width: 1024px;
      margin: auto;
      padding: 2rem;
      background-color: rgba(255, 255, 255, 0.85);
      color: #1c1b1f;
      border-radius: 1rem;
      backdrop-filter: blur(6px);
    }

    section {
      margin-bottom: 3rem;
    }

    /* --- STYLES FOR ARTICLE SECTION --- */
    .section-header { /* NEW container for the heading and button */
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    .publish-btn { /* NEW style for the button */
        background-color: #D0BCFF;
        color: #21005D;
        padding: 8px 16px;
        border-radius: 20px;
        text-decoration: none;
        font-weight: 500;
        font-size: 0.9rem;
        transition: background-color 0.3s ease;
    }
    .publish-btn:hover {
        background-color: #EADDFF;
    }
    #articles-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
    }
    .article-card {
        background-color: #f7f2fa;
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
    }
     .article-card img {
        width: 100%;
        height: 180px;
        object-fit: cover;
        border-radius: 8px;
        margin-bottom: 1rem;
    }
    .article-card h4 {
        margin: 0 0 0.5rem 0;
        font-size: 1.25rem;
        color: #1c1b1f;
    }
    .article-card .meta {
        font-size: 0.85rem;
        color: #6750A4;
        margin-bottom: 1rem;
    }
    .article-card p {
        flex-grow: 1;
        margin-bottom: 1.5rem;
    }
    .article-card a {
        color: #5b36f2;
        text-decoration: none;
        font-weight: 500;
        align-self: flex-start;
    }
    /* --- END OF ARTICLE STYLES --- */

    footer {
      text-align: center;
      background-color: rgba(255, 255, 255, 0.85);
      padding: 1rem;
      font-size: 0.9rem;
      color: #1c1b1f;
      border-radius: 1rem;
      margin: 1rem;
      backdrop-filter: blur(6px);
    }

    .contact-info {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      gap: 0.5rem;
    }
  </style>
</head>
<body>

  <header id="pageHeader">
    <h1>Throne of the Risen Christ International Ministry</h1>
    <nav>
      <a href="#about">About</a>
      <a href="#articles-section">Articles</a>
      <a href="#services">Services</a>
      <a href="gallery.html">Gallery</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-overlay">
      <h2 class="md-headline-large">We are one with Jesus Christ</h2>
      <p class="md-body-medium">A place to worship, grow, and serve together in Christ.</p>
    </div>
  </section>

  <main>
    <section id="about">
      <h3 class="md-title-large">About Us</h3>
      <p class="md-body-medium">
        Throne of the Risen Christ International Ministry is a Christ-centered community that focuses on the reality of the dispensation of grace in the name of Jesus Christ, our Lord and Savior. We believe in the power of worship, prayer, and fellowship to transform lives. Our goal is to unveil the reality of the truth and to awaken those who are spiritually blind.
      </p>
    </section>

    <section id="articles-section">
      <div class="section-header">
        <h3 class="md-title-large">Recent Articles</h3>
        <a href="create-article.html" class="publish-btn">Publish an Article</a>
      </div>
      <div id="articles-container">
        </div>
    </section>
    
    <section id="services">
      <h3 class="md-title-large">Come and Join us on our weekly services</h3>
      <ul class="md-body-medium">
        <li>Sunday Worship: 9:00 AM & 5:00 PM</li>
        <li>Midweek Prayer Meeting: Wednesday 6:30 PM</li>
        <li>Youth Fellowship: Friday 7:00 PM</li>
      </ul>
    </section>

    <section id="contact">
      <h3 class="md-title-large">Contact Us</h3>
      <div class="contact-info"><span class="material-icons">location_on</span> 123 Grace Street, Townsville</div>
      <div class="contact-info"><span class="material-icons">call</span> (123) 456-7890</div>
      <div class="contact-info"><span class="material-icons">email</span> contact@faithhaven.org</div>
    </section>
  </main>
  
  <footer>
    &copy; 2025 Throne of the Risen Christ International Ministry. All rights reserved.
  </footer>

  <script>
    let prevScroll = window.scrollY;
    const header = document.getElementById("pageHeader");

    window.addEventListener("scroll", () => {
      const currentScroll = window.scrollY;
      if (currentScroll > prevScroll) {
        header.style.transform = "translateY(-150%)";
      } else {
        header.style.transform = "translateY(0)";
      }
      prevScroll = currentScroll;
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const articlesContainer = document.getElementById('articles-container');

      fetch('/api/articles')
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
        })
        .then(articles => {
          articlesContainer.innerHTML = ''; // Clear any previous content
          if (articles.length === 0) {
              articlesContainer.innerHTML = '<p>No articles have been posted yet.</p>';
              return;
          }

          articles.forEach(article => {
            const articleCard = document.createElement('div');
            articleCard.className = 'article-card';
            
            const publishedDate = new Date(article.published_date || article.created_at).toLocaleDateString('en-US', {
                year: 'numeric', month: 'long', day: 'numeric'
            });

            articleCard.innerHTML = `
            ${article.image_url ? `<img src="${article.image_url}" alt="${article.title}">` : ''}
            <h4>${article.title}</h4>
            <p class="meta">By ${article.author || 'Anonymous'} on ${publishedDate}</p>
            <p>${article.content.substring(0, 200)}...</p>
             <a href="article.html?id=${article.id}">Read More</a>
            `;  
            articlesContainer.appendChild(articleCard);
          });
        })
        .catch(error => {
          console.error('Error fetching articles:', error);
          articlesContainer.innerHTML = '<p>Sorry, there was an error loading the articles.</p>';
        });
    });
  </script>
  </body>
</html>